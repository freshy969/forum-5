<html>
  <head>
    <script src="js/scripts.js"></script>
    <script src="js/index.js"></script>
    <script src="js/markdown.js"></script>
    <link rel='stylesheet' href='style.css' type='text/css'>
  </head>


  <body>
    <fieldset style="border-style: none; border-top-style: solid; padding-bottom: 0px; background-color: inherit;">
      <legend><a href= "/">Home</a> <a id="home-user">My Posts</a></legend>
    </fieldset>
    <fieldset>
      <legend><h1>Publish a document</h1></legend>

      <div id="noWeb3" class="warning" style = "display: none;">
        This Browser does not support Ethereum apps. <br> <a href="http://ethereum.org">Download Mist</a>
      </div>
        <input id="new-document-title" type="text"  style="width: 100%; height: 2em;" placeholder="Document Title" >
        <br>
        <input id="new-document-content" type="text"  style="width: 100%; height: 4em;" placeholder="Document Content" >
        <button id="publish">Publish</button>
    </fieldset>
    <br>
    <fieldset>
      <legend><h1>Search a tag</h1></legend>

      <input id="search-tag" type="text"  style="width: 100%; height: 4em;" placeholder="Search a tag for posts">
    </fieldset>
    <br>
    <fieldset>
      <legend><h1>Find Post</h1></legend>

      <input id="search-post" type="text"  style="width: 100%; height: 4em;" placeholder="Enter a post address">
    </fieldset>
    <br>
    <fieldset>
      <legend><h1>Latest Posts</h1></legend>
      <div id="latest">
      </div>
    </fieldset>

    <script type="text/javascript">
      var noWeb3 = document.getElementById('noWeb3')
      function autorun(){
        var noWeb3 = document.getElementById('noWeb3')
        window.addEventListener('load', function() {
          if(typeof web3 !== 'undefined' && typeof Web3 !== 'undefined') {
              // If there's a web3 library loaded, then make your own web3
              web3 = new Web3(web3.currentProvider);
              init();
          } else if (typeof Web3 !== 'undefined') {
              // If there isn't then set a provider
              web3 = new Web3(new Web3.providers.HttpProvider("http://localhost:8545"));
              init();
          } else if(typeof web3 == 'undefined') {
            // Alert the user he is not in a web3 compatible browser
            console.log("not web3 compatible");
            document.getElementById("noWeb3").style.display = "block";

            return;
          }
        })
      }
      if (document.addEventListener) document.addEventListener("DOMContentLoaded", autorun, false);
      else if (document.attachEvent) document.attachEvent("onreadystatechange", autorun);
      else window.onload = autorun;
    </script>
  </body>
</html>
